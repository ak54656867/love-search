<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>ğŸ¤« Secret Search v4.1.1 ğŸ¤«</title>
<style>
html, body { height: 100%; margin: 0; font-family: system-ui, -apple-system, BlinkMacSystemFont; }
body { color: #f5f5f5; min-height: 100vh; background: linear-gradient(180deg,#0d0d0d 0%,#1a1a1a 40%,#f5f5f5 100%); transition: all 0.3s; }
body.light-mode { color: #222; background: linear-gradient(180deg,#f5f5f5 0%,#e0e0e0 40%,#fff 100%); }
header { text-align:center; padding:30px 10px; }
h1 { margin:0; font-size:2.3rem; color:#ffffff; letter-spacing:1.5px; font-weight:bold; transition: color 0.3s; }
body.light-mode h1 { color:#222; }
.container { max-width:1200px; margin:auto; padding:20px; display:grid; grid-template-columns:2fr 1fr; gap:20px; }
.card { background:#1e1e1e; border-radius:16px; padding:20px; box-shadow:0 10px 30px rgba(0,0,0,0.6); color:#f5f5f5; transition: all 0.3s; }
body.light-mode .card { background:#f0f0f0; color:#222; box-shadow:0 10px 30px rgba(0,0,0,0.2); }
.search-box { display:flex; gap:10px; margin-bottom:10px; }
.search-box input { flex:1; padding:14px; font-size:1.1rem; border-radius:12px; border:1px solid #444; background:#2a2a2a; color:#f5f5f5; transition: all 0.3s; }
body.light-mode .search-box input { background:#fff; color:#222; border:1px solid #ccc; }
.search-box input::placeholder { color:#aaa; }
.search-box button { padding:14px 18px; font-size:1rem; border-radius:12px; border:none; background:#4f7cff; color:#fff; cursor:pointer; transition:0.3s; }
.search-box button:hover { opacity:0.85; }
#suggestions { background:#2a2a2a; border-radius:10px; margin-top:6px; color:#f5f5f5; transition: all 0.3s; }
body.light-mode #suggestions { background:#fff; color:#222; }
#suggestions div { padding:6px; cursor:pointer; }
#suggestions div:hover { background:#3b3b3b; }
body.light-mode #suggestions div:hover { background:#ddd; }
ul { padding-left:20px; margin:8px 0; }
li { margin:6px 0; }
.hidden { display:none; }
#noResult { font-size:0.9rem; color:#ccc; margin-top:6px; }
body.light-mode #noResult { color:#666; }
#toggleModeBtn { margin-top:10px; padding:8px 16px; font-size:1rem; border:none; border-radius:12px; cursor:pointer; background:#4f7cff; color:#fff; transition:0.3s; }
#toggleModeBtn:hover { opacity:0.85; }

/* =========================
   ì—…ë°ì´íŠ¸ ëª¨ë‹¬
========================= */
#updateModal { display:flex; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.6); justify-content:center; align-items:center; z-index:1000; }
#updateModal.hidden { display:none; }
#updateModal .modalContent { background:#1e1e1e; color:#f5f5f5; padding:20px; border-radius:16px; width:400px; max-width:90%; position:relative; box-shadow:0 10px 30px rgba(0,0,0,0.3); transition: all 0.3s; }
body.light-mode #updateModal .modalContent { background:#fff; color:#222; }
#updateModal #closeBtn { position:absolute; top:10px; right:10px; cursor:pointer; font-weight:bold; font-size:1.2rem; }

/* =========================
   ê´€ê³„ ê·¸ë˜í”„
========================= */
#relationGraph { border:1px solid #444; border-radius:12px; background: #111; display:block; margin-top:10px; }
body.light-mode #relationGraph { background:#f8f8f8; border:1px solid #ccc; }
</style>
</head>
<body>

<header>
  <h1>ğŸ¤« Secret Search ğŸ¤«</h1>
  <button id="toggleModeBtn">ë¼ì´íŠ¸ ëª¨ë“œ</button>
</header>

<div class="container">
  <div class="card">
    <div class="search-box">
      <input id="search" placeholder="ì´ë¦„ ê²€ìƒ‰ (1ê¸€ì ì´ìƒ)">
      <button id="searchBtn">ê²€ìƒ‰</button>
    </div>

    <div id="suggestions"></div>
    <p id="noResult" class="hidden">ğŸ” ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.</p>

    <h3>ğŸ” ê²€ìƒ‰ ê²°ê³¼</h3>
    <ul id="result"></ul>

    <h3>ğŸ“– ê¸°í˜¸ ì„¤ëª…</h3>
    <ul>
      <li>â¤ï¸ í˜„ì¬ ì—°ì• </li>
      <li>ğŸ’” ê³¼ê±° ì—°ì• </li>
      <li>ğŸ” ì„œë¡œ ì§ì‚¬ë‘</li>
      <li>â¡ï¸ ì§ì‚¬ë‘</li>
    </ul>

    <!-- ê´€ê³„ ê·¸ë˜í”„ -->
    <h3>ğŸŒ ê´€ê³„ ê·¸ë˜í”„</h3>
    <canvas id="relationGraph" width="400" height="400"></canvas>
  </div>

  <div>
    <div class="card">
      <h3>ğŸ”¥ ì¸ê¸°ìˆœìœ„ TOP 10</h3>
      <ul id="rank"></ul>
    </div>

    <div class="card" style="margin-top:20px">
      <h3>â¤ï¸ í˜„ì¬ ì—°ì• </h3>
      <ul id="dating"></ul>

      <h3>ğŸ’” ê³¼ê±° ì—°ì• </h3>
      <ul id="breakup"></ul>

      <h3>â¡ï¸ ì§ì‚¬ë‘</h3>
      <ul id="crush"></ul>

      <h3>ğŸ” ì„œë¡œ ì§ì‚¬ë‘</h3>
      <ul id="mutual"></ul>
    </div>
  </div>
</div>

<!-- ì—…ë°ì´íŠ¸ ëª¨ë‹¬ -->
<div id="updateModal">
  <div class="modalContent">
    <span id="closeBtn">âœ–</span>
    <h2 id="modalVersion"></h2>
    <div id="modalContent"></div>
  </div>
</div>

<script>
/* =========================
   ë‹¤í¬/ë¼ì´íŠ¸ ëª¨ë“œ
========================= */
const toggleBtn = document.getElementById("toggleModeBtn");
toggleBtn.onclick = () => {
  document.body.classList.toggle("light-mode");
  toggleBtn.textContent = document.body.classList.contains("light-mode") ? "ë‹¤í¬ ëª¨ë“œ" : "ë¼ì´íŠ¸ ëª¨ë“œ";
};

/* =========================
   ê´€ê³„ ë°ì´í„°
========================= */
const relations = [
  {from:"ì¡°ë¯¼ì¤€",to:"ë¬¸íš¨ì§„",type:"breakup"},
  {from:"ê°•ëª…êµ¬",to:"í™©í˜œë¹ˆ",type:"dating"},
  {from:"ì¡°ì—°ì•„",to:"ê¹€ë„ì—½",type:"crush"},
  {from:"ì†ì˜ˆì›",to:"ì „ì¤€í˜•",type:"crush"},
  {from:"ìµœí•˜ë¦°",to:"ì „ì¤€í˜•",type:"crush"},
  {from:"ì¡°ì—°ì•„",to:"ì „ì¤€í˜•",type:"crush"},
  {from:"ì–‘ì œí˜„",to:"ì¡°ì—°ì•„",type:"breakup"},
  {from:"ë¯¼ì •í˜¸",to:"ì´ìˆ˜í˜„",type:"crush"},
  {from:"ìµœì‹œí›ˆ",to:"ìœ ë™ìš°",type:"mutual"},
  {from:"ìµœì‹œí›ˆ",to:"ì „ì¤€í˜•",type:"dating"},
  {from:"ì•ˆì§„ìš°",to:"ìµœí•˜ë¦°",type:"breakup"},
  {from:"ê¹€ë„ì—½",to:"ìµœí•˜ë¦°",type:"crush"},
  {from:"ì†ì§€í˜¸",to:"ë¯¼íš¨ì£¼",type:"breakup"},
  {from:"ì´ë¯¿ìŒ",to:"ì´ê°€ìœ¨",type:"breakup"},
  {from:"ë¯¼ì •í˜¸",to:"ì¡°ì—°ì•„",type:"crush"},
  {from:"ì¡°í•˜ì˜",to:"ì´ë¯¿ìŒ",type:"crush"},
  {from:"ê¹€ë™ìœ¤",to:"ë¥˜ì§€ìš°",type:"crush"},
  {from:"ê¹€ë™ìœ¤",to:"ì†ì˜ˆì›",type:"crush"},
  {from:"ì •ì€ìš°",to:"ì‹¬ì±„ì›",type:"crush"},
  {from:"ë°•ì„±ì œ",to:"ìµœí•˜ë¦°",type:"crush"},
  {from:"ì¥ê±´ìš°",to:"ì‹ ì•„ë¦°",type:"crush"},
  {from:"ë°•ë‹¤ì˜¨",to:"ì •ì—°ì¬",type:"breakup"},
  {from:"ê¶Œí¬í˜„",to:"ë°•ë‹¤ì˜¨",type:"breakup"},
  {from:"ê¹€ë™ìœ¤",to:"í™©í•˜ë¦¼",type:"crush"},
  {from:"ë°©í›ˆíƒœ",to:"ë¥˜ì§€ìš°",type:"crush"},
  {from:"ë¯¼íš¨ì£¼",to:"ì „ì¤€í˜•",type:"crush"},
  {from:"ë¯¼íš¨ì£¼",to:"ì–‘ì œí˜„",type:"crush"},
  {from:"ë¯¼íš¨ì£¼",to:"ì¥ê±´ìš°",type:"crush"},
  {from:"ë¯¼íš¨ì£¼",to:"ê¹€ë„ì—½",type:"crush"},
  {from:"ì´ì„œìœ¤",to:"ì „ì¤€í˜•",type:"crush"},
  {from:"ë¥˜ì§€ìš°",to:"ê¹€ì •í›ˆ",type:"crush"},
  {from:"ì´ì„œìœ¤",to:"ì •ìœ ì¤€",type:"crush"},
  {from:"ë¬¸íš¨ì§„",to:"ì „ì¤€í˜•",type:"crush"},
  {from:"í—ˆë™í•˜",to:"ì†ì˜ˆì›",type:"crush"},
  {from:"ê¹€ì¤€ìš°",to:"ìµœí•˜ë¦°",type:"crush"},
  {from:"ê¹€ê°€ì˜",to:"ë…¸ë¬´í˜„",type:"crush"},
  {from:"í—ˆë™í•˜",to:"ì´ìˆ˜í˜„",type:"crush"},
  {from:"í—ˆë™í•˜",to:"ê¹€ê·œë¦¬",type:"crush"},
  {from:"ê¹€ë™ê±´",to:"ê¹€ì¬í¬",type:"crush"},
  {from:"í—ˆë™í•˜",to:"ìµœí•˜ë¦°",type:"crush"},
  {from:"ê°•ëª…êµ¬",to:"ë¬¸íš¨ì§„",type:"breakup"},
  {from:"ë°©í›ˆíƒœ",to:"ì„ìœ ë¦¬",type:"breakup"},
  {from:"ë°•ê²½ë‹´",to:"ì¡°ì—°ì•„",type:"crush"},
  {from:"ê¹€ë„ì›",to:"ì‹¬ì±„ì›",type:"crush"},
  {from:"ì´ì§€ìš°",to:"ì•ˆì§„ìš°",type:"dating"},
  {from:"ì´ë¯¿ìŒ",to:"ì‹ ì•„ë¦°",type:"crush"},
  {from:"ìœ ë™ìš°",to:"ì¡°í•˜ì˜",type:"crush"},
  {from:"ê¹€ë„ì—½",to:"ìµœì‹œí›ˆ",type:"crush"},
  {from:"ë°©í›ˆíƒœ",to:"ìµœì‹œí›ˆ",type:"crush"},
  {from:"í—ˆë™í•˜",to:"ì‹ ì•„ë¦°",type:"breakup"},
  {from:"ë°©í›ˆíƒœ",to:"í™©í˜œë¹ˆ",type:"breakup"},
  {from:"ê¹€ë¯¼ì„œ",to:"ì´ì˜ˆë‚˜",type:"crush"}
];

/* =========================
   ê²€ìƒ‰, ìë™ì™„ì„±, ìµœê·¼ê²€ìƒ‰
========================= */
const search = document.getElementById("search");
const searchBtn = document.getElementById("searchBtn");
const suggestions = document.getElementById("suggestions");
const result = document.getElementById("result");
const noResult = document.getElementById("noResult");
const dating = document.getElementById("dating");
const breakup = document.getElementById("breakup");
const crush = document.getElementById("crush");
const mutual = document.getElementById("mutual");
const rankEl = document.getElementById("rank");
const names = [...new Set(relations.flatMap(r=>[r.from,r.to]))];
const MAX_RECENT = 10;
let recent = JSON.parse(localStorage.getItem("recentSearch") || "[]");

function renderRecent() {
  recentList.innerHTML = "";
  recent.forEach(name => {
    const li = document.createElement("li");
    const span = document.createElement("span");
    span.textContent = name;
    span.style.cursor = "pointer";
    span.onclick = () => { search.value = name; searchRelations(); };
    li.appendChild(span);
    recentList.appendChild(li);
  });
}
renderRecent();

search.addEventListener("input", () => {
  const q = search.value.trim();
  suggestions.innerHTML = "";
  if(q.length < 1) return;
  names.filter(n=>n.includes(q)).forEach(n=>{
    const d = document.createElement("div");
    d.textContent = n;
    d.onclick = ()=>{ search.value=n; suggestions.innerHTML=""; searchRelations(); };
    suggestions.appendChild(d);
  });
});

function addRecent(name){
  recent = recent.filter(n=>n!==name);
  recent.unshift(name);
  if(recent.length>MAX_RECENT) recent.pop();
  localStorage.setItem("recentSearch", JSON.stringify(recent));
  renderRecent();
}

function searchRelations(){
  const q = search.value.trim();
  result.innerHTML="";
  dating.innerHTML="";
  breakup.innerHTML="";
  crush.innerHTML="";
  mutual.innerHTML="";
  if(q.length<1) return;
  const found = relations.filter(r=>r.from===q||r.to===q);
  noResult.classList.toggle("hidden", found.length>0);
  if(found.length===0) return;
  addRecent(q);
  found.forEach(r=>{
    const icon = r.type==="dating"?"â¤ï¸":r.type==="breakup"?"ğŸ’”":r.type==="mutual"?"ğŸ”":"â¡ï¸";
    const li = document.createElement("li");
    li.textContent = `${r.from} ${icon} ${r.to}`;
    result.appendChild(li);
    if(r.type==="dating") dating.appendChild(li.cloneNode(true));
    if(r.type==="breakup") breakup.appendChild(li.cloneNode(true));
    if(r.type==="crush") crush.appendChild(li.cloneNode(true));
    if(r.type==="mutual") mutual.appendChild(li.cloneNode(true));
  });
}
searchBtn.onclick = searchRelations;
search.addEventListener("keydown", e=>{ if(e.key==="Enter") searchRelations(); });

/* =========================
   ì¸ê¸°ìˆœìœ„
========================= */
function rank(){
  const score = {};
  relations.forEach(r=>{
    switch(r.type){
      case "crush": score[r.to]=(score[r.to]||0)+1; break;
      case "dating":
      case "breakup":
      case "mutual": score[r.from]=(score[r.from]||0)+1; score[r.to]=(score[r.to]||0)+1; break;
    }
  });
  rankEl.innerHTML = Object.entries(score).sort((a,b)=>b[1]-a[1]).slice(0,10).map(e=>`<li>${e[0]} (${e[1]})</li>`).join("");
}
rank();

/* =========================
   ì—…ë°ì´íŠ¸ ëª¨ë‹¬
========================= */
const updateLog = { version: "v4.1.1", date: "2025-12-26", content: ["ê´€ê³„ ê·¸ë˜í”„ ì¶”ê°€ ë° ìƒ‰ìƒ ì˜ë¯¸ ë°˜ì˜", "UI/UX ê°œì„ , ëª¨ë‹¬ ë²„íŠ¼ ìœ„ì¹˜ ì¡°ì •"] };
const modal = document.getElementById("updateModal");
const closeBtn = document.getElementById("closeBtn");
document.getElementById("modalVersion").textContent = `ì—…ë°ì´íŠ¸ ${updateLog.version} Â· ${updateLog.date}`;
document.getElementById("modalContent").innerHTML = updateLog.content.map(c=>`â€¢ ${c}`).join("<br>");
closeBtn.onclick = ()=> modal.classList.add("hidden");

/* =========================
   ê´€ê³„ ê·¸ë˜í”„ ê·¸ë¦¬ê¸°
========================= */
const canvas = document.getElementById("relationGraph");
const ctx = canvas.getContext("2d");
const nodeRadius = 20;
const padding = 50;
const centerX = canvas.width/2;
const centerY = canvas.height/2;
const radius = Math.min(canvas.width,canvas.height)/2 - padding;
const nodePos = {};
uniqueNames.forEach((name,i)=>{
  const angle = (i/uniqueNames.length)*Math.PI*2;
  nodePos[name] = { x: centerX+radius*Math.cos(angle), y: centerY+radius*Math.sin(angle) };
});

function getLineColor(r){
  if(r.type==="mutual"||r.type==="dating") return "green";
  if(r.type==="crush"){
    const targetHasOtherCrush = relations.some(o=>o.from!==r.from && o.to===r.to && o.type==="crush");
    return targetHasOtherCrush ? "red" : "yellow";
  }
  return "gray";
}

relations.forEach(r=>{
  const from = nodePos[r.from];
  const to = nodePos[r.to];
  ctx.beginPath();
  ctx.moveTo(from.x, from.y);
  ctx.lineTo(to.x, to.y);
  ctx.strokeStyle = getLineColor(r);
  ctx.lineWidth = 2;
  ctx.stroke();
});

Object.entries(nodePos).forEach(([name,pos])=>{
  ctx.beginPath();
  ctx.arc(pos.x,pos.y,nodeRadius,0,Math.PI*2);
  ctx.fillStyle = "#4f7cff";
  ctx.fill();
  ctx.strokeStyle = "#222";
  ctx.stroke();
  ctx.fillStyle = "#fff";
  ctx.font="12px sans-serif";
  ctx.textAlign="center";
  ctx.textBaseline="middle";
  ctx.fillText(name,pos.x,pos.y);
});
</script>
</body>
</html>
