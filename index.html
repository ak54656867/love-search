<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>ğŸ¤« Secret Search v4.1.1 ğŸ¤«</title>

<style>
/* =========================
   ê¸°ë³¸ ìŠ¤íƒ€ì¼
========================= */
html, body { height:100%; margin:0; font-family: system-ui, -apple-system, BlinkMacSystemFont; transition: all 0.3s; }
body {
  background: linear-gradient(180deg,#0d0d0d 0%,#1a1a1a 40%,#f5f5f5 100%);
  color:#f5f5f5;
}
body.light-mode {
  background: linear-gradient(180deg,#f5f5f5 0%,#e0e0e0 40%,#ffffff 100%);
  color:#222;
}
header { text-align:center; padding:30px 10px; }
h1 { margin:0; font-size:2.3rem; font-weight:bold; letter-spacing:1.5px; transition: color 0.3s; }
body.light-mode h1 { color:#222; }
.container { max-width:1200px; margin:auto; padding:20px; display:grid; grid-template-columns:2fr 1fr; gap:20px; }

/* ì¹´ë“œ ìŠ¤íƒ€ì¼ */
.card { background:#1e1e1e; border-radius:16px; padding:20px; box-shadow:0 10px 30px rgba(0,0,0,0.6); color:#f5f5f5; transition: all 0.3s; }
body.light-mode .card { background:#f0f0f0; color:#222; box-shadow:0 10px 30px rgba(0,0,0,0.2); }

/* ê²€ìƒ‰ ë°•ìŠ¤ */
.search-box { display:flex; gap:10px; }
.search-box input {
  flex:1; padding:14px; font-size:1.1rem; border-radius:12px; border:1px solid #444; background:#2a2a2a; color:#f5f5f5; transition: all 0.3s;
}
body.light-mode .search-box input { background:#fff; color:#222; border:1px solid #ccc; }
.search-box input::placeholder { color:#aaa; }
.search-box button { padding:14px 18px; font-size:1rem; border-radius:12px; border:none; background:#4f7cff; color:#fff; cursor:pointer; transition:0.3s; }
.search-box button:hover { opacity:0.85; }

/* ìë™ì™„ì„± */
#suggestions { background:#2a2a2a; border-radius:10px; margin-top:6px; color:#f5f5f5; transition: all 0.3s; max-height:200px; overflow-y:auto; }
body.light-mode #suggestions { background:#fff; color:#222; }
#suggestions div { padding:6px; cursor:pointer; }
#suggestions div:hover { background:#3b3b3b; }
body.light-mode #suggestions div:hover { background:#ddd; }

/* ë¦¬ìŠ¤íŠ¸ */
ul { padding-left:20px; }
li { margin:6px 0; transition: all 0.2s; }
li:hover { background:rgba(255,255,255,0.1); border-radius:6px; }
body.light-mode li:hover { background:rgba(0,0,0,0.1); }

/* ìµœê·¼ ê²€ìƒ‰ */
#recentWrapper { margin-top:10px; background:#2a2a2a; padding:10px; border-radius:12px; transition: all 0.3s; display:flex; flex-wrap:wrap; gap:6px; }
body.light-mode #recentWrapper { background:#e0e0e0; }
.recentTag { padding:6px 10px; border-radius:12px; background:#4f7cff; color:#fff; cursor:pointer; transition:0.3s; }
.recentTag:hover { opacity:0.8; }
body.light-mode .recentTag { background:#4f7cff; color:#fff; }

/* ê·¸ë˜í”„ */
#graph { margin-top:20px; border-radius:16px; background:#1e1e1e; color:#f5f5f5; min-height:250px; padding:10px; overflow:auto; display:flex; flex-wrap:wrap; gap:10px; transition: all 0.3s; }
body.light-mode #graph { background:#f0f0f0; color:#222; }
.node { padding:6px 12px; border-radius:12px; background:#4f7cff; color:#fff; cursor:pointer; transition:0.3s; }
.node.dating { background:#ff4f4f; }
.node.breakup { background:#999; }
.node.crush { background:#ffa500; }
.node.mutual { background:#4fff88; }

/* í† ê¸€ ë²„íŠ¼ */
#toggleModeBtn { margin-top:10px; padding:8px 16px; font-size:1rem; border:none; border-radius:12px; cursor:pointer; background:#4f7cff; color:#fff; transition:0.3s; }
#toggleModeBtn:hover { opacity:0.85; }

/* ê²€ìƒ‰ ê°•ì¡° */
.highlight { animation: highlightAnim 0.5s; }
@keyframes highlightAnim {
  0% { background: yellow; color:#000; }
  100% { background: transparent; color:inherit; }
}

/* ì—…ë°ì´íŠ¸ ëª¨ë‹¬ */
#updateModal { display:flex; justify-content:center; align-items:center; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.6); z-index:1000; }
#updateModal .modalContent { background:#1e1e1e; color:#f5f5f5; padding:20px; border-radius:16px; width:400px; max-width:90%; box-shadow:0 10px 30px rgba(0,0,0,0.3); }
body.light-mode #updateModal .modalContent { background:#fff; color:#222; }
#updateModal #closeBtn { position:absolute; top:10px; right:15px; cursor:pointer; font-weight:bold; font-size:1.2rem; }
</style>
</head>
<body>

<header>
  <h1>ğŸ¤« Secret Search v4.1.1 ğŸ¤«</h1>
  <p>ì´ë¦„ìœ¼ë¡œ ê´€ê³„ ê²€ìƒ‰ + ê·¸ë˜í”„</p>
  <button id="toggleModeBtn">ë¼ì´íŠ¸ ëª¨ë“œ</button>
</header>

<div class="container">
  <div class="card">
    <div class="search-box">
      <input id="search" placeholder="ì´ë¦„ ê²€ìƒ‰ (1ê¸€ì ì´ìƒ)">
      <button id="searchBtn">ê²€ìƒ‰</button>
    </div>
    <div id="suggestions"></div>

    <div id="recentWrapper"></div>

    <p id="noResult" class="hidden">ğŸ” ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.</p>

    <h3>ğŸ” ê²€ìƒ‰ ê²°ê³¼</h3>
    <ul id="result"></ul>

    <h3>ğŸŒ ê´€ê³„ ê·¸ë˜í”„</h3>
    <div id="graph"></div>
  </div>

  <div>
    <div class="card">
      <h3>ğŸ”¥ ì¸ê¸°ìˆœìœ„ TOP 10</h3>
      <ul id="rank"></ul>
    </div>

    <div class="card" style="margin-top:20px">
      <h3>â¤ï¸ í˜„ì¬ ì—°ì• </h3>
      <ul id="dating"></ul>
      <h3>ğŸ’” ê³¼ê±° ì—°ì• </h3>
      <ul id="breakup"></ul>
      <h3>â¡ï¸ ì§ì‚¬ë‘</h3>
      <ul id="crush"></ul>
      <h3>ğŸ” ì„œë¡œ ì§ì‚¬ë‘</h3>
      <ul id="mutual"></ul>
    </div>
  </div>
</div>

<footer id="footerVersion">ë²„ì „ v4.1.1 Â· 2025-12-26</footer>

<div id="updateModal">
  <div class="modalContent">
    <span id="closeBtn">âœ–</span>
    <h2 id="modalVersion">ì—…ë°ì´íŠ¸ v4.1.1 Â· 2025-12-26</h2>
    <div id="modalContent">
      â€¢ ê´€ê³„ ê·¸ë˜í”„ ì¶”ê°€<br>
      â€¢ ìµœê·¼ ê²€ìƒ‰ íƒœê·¸í™”<br>
      â€¢ ê²€ìƒ‰ ê°•ì¡° ì• ë‹ˆë©”ì´ì…˜<br>
      â€¢ ìë™ì™„ì„± í•˜ì´ë¼ì´íŠ¸<br>
      â€¢ ë‹¤í¬/ë¼ì´íŠ¸ ëª¨ë“œ OS ìë™ ê°ì§€<br>
      â€¢ ëª¨ë°”ì¼ ì¹œí™”ì  UI
    </div>
  </div>
</div>

<script>
/* =========================
   ë‹¤í¬/ë¼ì´íŠ¸ ëª¨ë“œ
========================= */
const toggleBtn = document.getElementById("toggleModeBtn");
toggleBtn.onclick = () => {
  document.body.classList.toggle("light-mode");
  toggleBtn.textContent = document.body.classList.contains("light-mode") ? "ë‹¤í¬ ëª¨ë“œ" : "ë¼ì´íŠ¸ ëª¨ë“œ";
};
// OS ìë™ ê°ì§€
if(window.matchMedia && window.matchMedia('(prefers-color-scheme: light)').matches){
  document.body.classList.add("light-mode");
  toggleBtn.textContent="ë‹¤í¬ ëª¨ë“œ";
}

/* =========================
   ê´€ê³„ ë°ì´í„°
========================= */
const relations = [
  {from:"ì¡°ë¯¼ì¤€",to:"ë¬¸íš¨ì§„",type:"breakup"},
  {from:"ê°•ëª…êµ¬",to:"í™©í˜œë¹ˆ",type:"dating"},
  {from:"ì¡°ì—°ì•„",to:"ê¹€ë„ì—½",type:"crush"},
  {from:"ì†ì˜ˆì›",to:"ì „ì¤€í˜•",type:"crush"},
  {from:"ìµœí•˜ë¦°",to:"ì „ì¤€í˜•",type:"crush"},
  {from:"ì¡°ì—°ì•„",to:"ì „ì¤€í˜•",type:"crush"},
  {from:"ì–‘ì œí˜„",to:"ì¡°ì—°ì•„",type:"breakup"},
  {from:"ë¯¼ì •í˜¸",to:"ì´ìˆ˜í˜„",type:"crush"},
  {from:"ìµœì‹œí›ˆ",to:"ìœ ë™ìš°",type:"mutual"},
  {from:"ìµœì‹œí›ˆ",to:"ì „ì¤€í˜•",type:"dating"},
  {from:"ì•ˆì§„ìš°",to:"ìµœí•˜ë¦°",type:"breakup"},
  {from:"ê¹€ë„ì—½",to:"ìµœí•˜ë¦°",type:"crush"},
  {from:"ì†ì§€í˜¸",to:"ë¯¼íš¨ì£¼",type:"breakup"},
  {from:"ì´ë¯¿ìŒ",to:"ì´ê°€ìœ¨",type:"breakup"},
  {from:"ë¯¼ì •í˜¸",to:"ì¡°ì—°ì•„",type:"crush"},
  {from:"ì¡°í•˜ì˜",to:"ì´ë¯¿ìŒ",type:"crush"},
  {from:"ê¹€ë™ìœ¤",to:"ë¥˜ì§€ìš°",type:"crush"},
  {from:"ê¹€ë™ìœ¤",to:"ì†ì˜ˆì›",type:"crush"},
  {from:"ì •ì€ìš°",to:"ì‹¬ì±„ì›",type:"crush"},
  {from:"ë°•ì„±ì œ",to:"ìµœí•˜ë¦°",type:"crush"},
  {from:"ì¥ê±´ìš°",to:"ì‹ ì•„ë¦°",type:"crush"},
  {from:"ë°•ë‹¤ì˜¨",to:"ì •ì—°ì¬",type:"breakup"},
  {from:"ê¶Œí¬í˜„",to:"ë°•ë‹¤ì˜¨",type:"breakup"},
  {from:"ê¹€ë™ìœ¤",to:"í™©í•˜ë¦¼",type:"crush"},
  {from:"ë°©í›ˆíƒœ",to:"ë¥˜ì§€ìš°",type:"crush"},
  {from:"ë¯¼íš¨ì£¼",to:"ì „ì¤€í˜•",type:"crush"},
  {from:"ë¯¼íš¨ì£¼",to:"ì–‘ì œí˜„",type:"crush"},
  {from:"ë¯¼íš¨ì£¼",to:"ì¥ê±´ìš°",type:"crush"},
  {from:"ë¯¼íš¨ì£¼",to:"ê¹€ë„ì—½",type:"crush"},
  {from:"ì´ì„œìœ¤",to:"ì „ì¤€í˜•",type:"crush"},
  {from:"ë¥˜ì§€ìš°",to:"ê¹€ì •í›ˆ",type:"crush"},
  {from:"ì´ì„œìœ¤",to:"ì •ìœ ì¤€",type:"crush"},
  {from:"ë¬¸íš¨ì§„",to:"ì „ì¤€í˜•",type:"crush"},
  {from:"í—ˆë™í•˜",to:"ì†ì˜ˆì›",type:"crush"},
  {from:"ê¹€ì¤€ìš°",to:"ìµœí•˜ë¦°",type:"crush"},
  {from:"ê¹€ê°€ì˜",to:"ë…¸ë¬´í˜„",type:"crush"},
  {from:"í—ˆë™í•˜",to:"ì´ìˆ˜í˜„",type:"crush"},
  {from:"í—ˆë™í•˜",to:"ê¹€ê·œë¦¬",type:"crush"},
  {from:"ê¹€ë™ê±´",to:"ê¹€ì¬í¬",type:"crush"},
  {from:"í—ˆë™í•˜",to:"ìµœí•˜ë¦°",type:"crush"},
  {from:"ê°•ëª…êµ¬",to:"ë¬¸íš¨ì§„",type:"breakup"},
  {from:"ë°©í›ˆíƒœ",to:"ì„ìœ ë¦¬",type:"breakup"},
  {from:"ë°•ê²½ë‹´",to:"ì¡°ì—°ì•„",type:"crush"},
  {from:"ê¹€ë„ì›",to:"ì‹¬ì±„ì›",type:"crush"},
  {from:"ì´ì§€ìš°",to:"ì•ˆì§„ìš°",type:"dating"},
  {from:"ì´ë¯¿ìŒ",to:"ì‹ ì•„ë¦°",type:"crush"},
  {from:"ìœ ë™ìš°",to:"ì¡°í•˜ì˜",type:"crush"},
  {from:"ê¹€ë„ì—½",to:"ìµœì‹œí›ˆ",type:"crush"},
  {from:"ë°©í›ˆíƒœ",to:"ìµœì‹œí›ˆ",type:"crush"},
  {from:"í—ˆë™í•˜",to:"ì‹ ì•„ë¦°",type:"breakup"},
  {from:"ë°©í›ˆíƒœ",to:"í™©í˜œë¹ˆ",type:"breakup"},
  {from:"ê¹€ë¯¼ì„œ",to:"ì´ì˜ˆë‚˜",type:"crush"}
];

const search = document.getElementById("search");
const searchBtn = document.getElementById("searchBtn");
const suggestions = document.getElementById("suggestions");
const result = document.getElementById("result");
const dating = document.getElementById("dating");
const breakup = document.getElementById("breakup");
const crush = document.getElementById("crush");
const mutual = document.getElementById("mutual");
const rankEl = document.getElementById("rank");
const recentWrapper = document.getElementById("recentWrapper");
const graph = document.getElementById("graph");

const names=[...new Set(relations.flatMap(r=>[r.from,r.to]))];
const MAX_RECENT=10;
let recent = JSON.parse(localStorage.getItem("recentSearch")||"[]");

/* =========================
   ìµœê·¼ ê²€ìƒ‰ ë Œë”ë§ (íƒœê·¸í˜•)
========================= */
function renderRecent(){
  recentWrapper.innerHTML="";
  recent.forEach(name=>{
    const tag = document.createElement("div");
    tag.textContent=name;
    tag.className="recentTag";
    tag.onclick=()=>{ search.value=name; searchRelations(); };
    recentWrapper.appendChild(tag);
  });
}
renderRecent();

/* =========================
   ìë™ì™„ì„±
========================= */
search.addEventListener("input",()=>{
  const q=search.value.trim();
  suggestions.innerHTML="";
  if(q.length<1) return;
  names.filter(n=>n.includes(q)).forEach(n=>{
    const d=document.createElement("div");
    // ì…ë ¥ ê¸€ì í•˜ì´ë¼ì´íŠ¸
    const regex=new RegExp(`(${q})`,"gi");
    d.innerHTML=n.replace(regex,'<b>$1</b>');
    d.onclick=()=>{ search.value=n; suggestions.innerHTML=""; searchRelations(); };
    suggestions.appendChild(d);
  });
});

/* =========================
   ê²€ìƒ‰ ì‹¤í–‰
========================= */
function addRecent(name){
  recent=recent.filter(n=>n!==name);
  recent.unshift(name);
  if(recent.length>MAX_RECENT) recent.pop();
  localStorage.setItem("recentSearch",JSON.stringify(recent));
  renderRecent();
}

function searchRelations(){
  const q=search.value.trim();
  result.innerHTML=""; dating.innerHTML=""; breakup.innerHTML=""; crush.innerHTML=""; mutual.innerHTML=""; graph.innerHTML=""; 
  document.querySelectorAll("li").forEach(li=>li.classList.remove("highlight"));
  document.getElementById("noResult").classList.add("hidden");
  if(q.length<1) return;
  const found=relations.filter(r=>r.from===q||r.to===q);
  if(found.length===0){ document.getElementById("noResult").classList.remove("hidden"); return; }
  addRecent(q);

  // ë¦¬ìŠ¤íŠ¸ + ê°•ì¡°
  found.forEach(r=>{
    const icon = r.type==="dating"?"â¤ï¸":r.type==="breakup"?"ğŸ’”":r.type==="mutual"?"ğŸ”":"â¡ï¸";
    const li=document.createElement("li");
    li.textContent=`${r.from} ${icon} ${r.to}`;
    li.classList.add("highlight");
    result.appendChild(li);
    if(r.type==="dating") dating.appendChild(li.cloneNode(true));
    if(r.type==="breakup") breakup.appendChild(li.cloneNode(true));
    if(r.type==="crush") crush.appendChild(li.cloneNode(true));
    if(r.type==="mutual") mutual.appendChild(li.cloneNode(true));
  });

  // ê·¸ë˜í”„
  const nodes=new Set();
  found.forEach(r=>{ nodes.add(r.from); nodes.add(r.to); });
  nodes.forEach(name=>{
    const n=document.createElement("div");
    n.className="node";
    const types=found.filter(r=>r.from===name||r.to===name).map(r=>r.type);
    if(types.includes("dating")) n.classList.add("dating");
    else if(types.includes("breakup")) n.classList.add("breakup");
    else if(types.includes("mutual")) n.classList.add("mutual");
    else if(types.includes("crush")) n.classList.add("crush");
    n.textContent=name;
    n.onclick=()=>{ search.value=name; searchRelations(); };
    graph.appendChild(n);
  });
}
searchBtn.onclick=searchRelations;
search.addEventListener("keydown",e=>{ if(e.key==="Enter") searchRelations(); });

/* =========================
   ì¸ê¸°ìˆœìœ„
========================= */
function rank(){
  const score={};
  relations.forEach(r=>{
    switch(r.type){
      case "crush": score[r.to]=(score[r.to]||0)+1; break;
      case "dating": case "breakup": score[r.from]=(score[r.from]||0)+1; score[r.to]=(score[r.to]||0)+1; break;
      case "mutual": score[r.from]=(score[r.from]||0)+1; score[r.to]=(score[r.to]||0)+1; break;
    }
  });
  rankEl.innerHTML=Object.entries(score).sort((a,b)=>b[1]-a[1]).slice(0,10).map(e=>`<li>${e[0]} (${e[1]})</li>`).join("");
}
rank();

/* =========================
   ì—…ë°ì´íŠ¸ ëª¨ë‹¬
========================= */
const modal=document.getElementById("updateModal");
const closeBtn=document.getElementById("closeBtn");
closeBtn.onclick=()=>{ modal.style.display="none"; };
</script>

</body>
</html>
